# 更新日志

## v016 版本发布

这个版本主要是进行了 `Laravel11` 项目的迁移，在获取代码之后首先执行

```
php artisan catch:migrate permissions
```

:::warning
因为权限表的岗位表名和 Laravel 的 Jobs 表名冲突，所以修改了表名，请及时更新
:::

这次迁移算是很顺利，但是过程中也遇到了一些麻烦，各种错误不断，基本都是由于 `Laravel11` 初始配置与 Laravel10 项目不同导致的。目前已经全部解决，本人也顺利的用上了 Laravel11 的简洁骨架。以后也是在这个 Project 骨架上进行开发。

### 更新

- 超管支持数组配置
- 打包环境区分本地和正式环境，正式环境将抹除开发工具和模块管理
- 修改 schema 字段
- 用户管理新增加入到权限管理中
- 登录页面的优化
- 修改岗位名称，防止和 Laravel 项目的任务表冲突
- 增加初始化数据
- Request 模板生成错误
- Laravel11 的 migration 兼容更新
- 修复异步任务执行错误
- 修复附件组件上传的内存泄露
- 更改 Element Radis 的 Api，label -> value
- 新增两个上传组件，单文件上传和多文件上传
- 优化了后台上传组件
- 后台编辑器支持附件上传组件
- 优化后台的状态组件
- 本地上传将会自动把文件添加到附件列表，供附件组件选择使用
- 优化了上传配置，增加了上传类型限制和大小限制
- 优化了打包类型
- ....等等功能

## v015 版本发布

### 新增

- 新增了两个 DashBoard 页面，销售和服务器信息界面
- 新增 Echarts 组件，提供服务器信息查看
- 新增后台路由界面，可以直接通过页面查看路由列表，支持搜索查询
- 新增配置提示，获取相关配置

### 后端

- 修复后台认证默认 `Guard`, 需要用户重新发布配置文件，使用下面的命令
- 优化数据库报错信息提示
- 优化菜单导出，支持菜单导出多模块
- 优化项目安装，支持在正式环境安装，使用下面的命令

```sh
php artisan catch:install --prod
```

- 修复模型日期错误，框架自带的问题，需要重写方法
- 优化用户超管判断，支持数组配置
- 优化 Schema 字段
- 优化权限相关

### 前端

- 前端支持区分本地和正式环境打包路由，在正式环境打包，去除开发工具等菜单
- 优化前端项目的权限指令
- 删除用户管理的静态路由，添加到权限管理内，支持可配置权限，需要使用下面的命令同步数据
- 修改后台登录界面

### 如何更新

在拉取代码之后

```sh
composer update --ignore-paltform-reqs

php artisan vendor:publish --tag=catch-config --force

php artisan catch:db:seed permissions
```

## v014 版本发布

- 新增域名管理模块（该功能可用于 Saas 应用，创建 SaaS 应用）
  - 阿里云域名管理
  - 腾讯云域名管理
- 优化代码生成，自动生成前端表单规则
- 优化代码生成，自动生成 radio switch 等组件的选项

- 修复后台管理标签页标题错误
- 修复后台多语言切换
- 修复路由缓存问题

## v013 版本发布

- 新增会员模块
- 新增 webhook 通知
  - 钉钉 webhook 通知
  - 飞书 webhook 通知
  - 企业微信 webhook 通知
    主要用于监听应用消息，例如日志，错误

## v012 版本发布

- 优化上传组件
- 优化弹窗组件
- 优化后台组件状态切换
- 优化附件选择组件
- 优化代码自动生成，数据库字段直接拖拽
- 新增地区选择组件
- 优化菜单选择组件
- 优化用户信息
- 修复验证码获取
- 修复权限更新报错
- 修复模块创建

## v011 版本发布

- 新增商城模块（开发中）
  - 商品模块
  - 商品分类模块
  - 商品品牌
  - 商品服务
  - 规格模板
  - 商品标签
  - 运费模板
  - 商城装修

## v010 版本发布

- 修复了权限管理菜单 tip2 重叠问题
- 修复安装时数据库存在，无法安装的问题
- 修复 Ctrl C 强制终止，无法再次安装的情况（依赖信号，此功能需要安装 pcntl 扩展）
- 优化登陆配置，在未配置的情况下，不限时短信和微信登陆
- 优化项目安装，引入 prompts 增强安装体验
- 优化项目安装，增加前端应用配置，无需用户自行配置
- 新增模块自动加载配置，推荐在线上使用
- 新增模块获取信息方法
- 新增 restores 方法,恢复软删除数据
- 新增注解 Form （实验性，开发中）
- 更多...

## v004 版本发布

- 优化了代码生成功能，可以更加便捷的生成代码
- 新增了头像显示组件
- 优化了 migration 生成
- 优化了项目安装，默认安装权限模块和系统管理配置模块
- 修复了 action 生成 loading 状态
- 核心包更新，以及修复 bug
- 优化模块安装，图形界面安装

## v003 版本发布

- 新增七牛上传组件
- 新增腾讯 cos 组件
- 新增阿里云短信功能
- 新增腾讯短信功能
- 新增动态配置功能
- 新增手机短信登陆功能
- 新增支持手机号登陆功能

## V0.0.2 版本发布

- 新增 Excel 导入导出组件
- 新增 Wechat 模块
- 新增异步任务组件
- 代码生成功能优化
- 新增修改密码命令，便于服务器管理
- 新增异步任务 task
